<%# locals: (account:, entry:, reconciliation_dry_run:, is_update:, action_verb:) %>

<div class="space-y-4 text-sm text-secondary">
  <% if account.investment? %>
    <% brokerage_cash = reconciliation_dry_run.new_cash_balance || 0 %>
    <% holdings_value = reconciliation_dry_run.new_balance - brokerage_cash %>

    <p><%= t("valuations.confirmation_contents.investment_intro", action: action_verb, date: I18n.l(entry.date, format: :long)) %></p>

    <div class="bg-container rounded-lg p-4 space-y-2 border border-primary">
      <div class="flex justify-between">
        <span><%= t("valuations.confirmation_contents.total_account_value") %></span>
        <span class="font-medium text-primary"><%= Money.new(reconciliation_dry_run.new_balance, account.currency).format %></span>
      </div>
      <div class="flex justify-between text-xs">
        <span><%= t("valuations.confirmation_contents.holdings_value") %></span>
        <span><%= Money.new(holdings_value, account.currency).format %></span>
      </div>
      <div class="flex justify-between text-xs">
        <span><%= t("valuations.confirmation_contents.brokerage_cash") %></span>
        <span class="<%= brokerage_cash.negative? ? "text-red-500" : "text-green-500" %>"><%= Money.new(brokerage_cash, account.currency).format %></span>
      </div>
    </div>
  <% else %>
    <p><%= action_verb %>
      <% if account.depository? %>
        <%= t("valuations.confirmation_contents.account_balance") %>
      <% elsif account.credit_card? %>
        <%= t("valuations.confirmation_contents.credit_card_balance") %>
      <% elsif account.loan? %>
        <%= t("valuations.confirmation_contents.loan_balance") %>
      <% elsif account.property? %>
        <%= t("valuations.confirmation_contents.property_value") %>
      <% elsif account.vehicle? %>
        <%= t("valuations.confirmation_contents.vehicle_value") %>
      <% elsif account.crypto? %>
        <%= t("valuations.confirmation_contents.crypto_balance") %>
      <% elsif account.other_asset? %>
        <%= t("valuations.confirmation_contents.asset_value") %>
      <% elsif account.other_liability? %>
        <%= t("valuations.confirmation_contents.liability_balance") %>
      <% else %>
        <%= t("valuations.confirmation_contents.balance") %>
      <% end %>
      <%= t("valuations.confirmation_contents.on_date_to", date: I18n.l(entry.date, format: :long), amount: entry.amount_money.format) %>
    </p>
  <% end %>

  <p><%= is_update ? t("valuations.confirmation_contents.recalculation_change") : t("valuations.confirmation_contents.recalculation_update") %></p>
</div>
