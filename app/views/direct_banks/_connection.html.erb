<%# locals: (connection:) %>

<div id="direct_bank_connection_<%= connection.id %>" class="border border-primary rounded-lg p-4 bg-container-inset">
  <div class="flex justify-between items-center">
    <div>
      <h3 class="font-medium text-primary"><%= connection.name %></h3>
      <p class="text-xs text-secondary">
        Last synced: <%= connection.last_synced_at&.strftime("%B %d, %Y at %I:%M %p") || "Never" %>
      </p>
      <% if connection.pending_account_setup? %>
        <span class="inline-block mt-1 px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs rounded">
          Account setup required
        </span>
      <% end %>
      <% if connection.status == "requires_update" %>
        <span class="inline-block mt-1 px-2 py-0.5 bg-red-100 text-red-800 text-xs rounded">
          Requires attention
        </span>
      <% end %>
    </div>
    <div class="flex gap-2">
      <%= link_to "View", direct_bank_path(connection.provider_type.downcase, connection), 
          class: "btn btn-secondary btn-sm" %>
      <%= button_to "Sync", sync_direct_bank_path(connection.provider_type.downcase, connection), 
          method: :post, 
          class: "btn btn-primary btn-sm" %>
    </div>
  </div>
</div>