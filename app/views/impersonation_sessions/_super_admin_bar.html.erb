<div class="sticky top-0 left-0 w-full bg-black flex items-center justify-between font-mono z-50">
  <div class="flex items-center bg-red-600 px-6 py-4">
    <%= icon "alert-triangle", size: "lg", color: "current", class: "mr-2" %>
    <span class="text-inverse font-semibold uppercase"><%= t(".super_admin") %></span>
  </div>
  <div>
    <%= link_to t(".jobs"), sidekiq_web_url, class: "text-white underline hover:text-gray-100" %>
  </div>

  <div class="flex items-center space-x-2 px-2 py-2 text-white">
    <% if Current.session.active_impersonator_session.present? %>
      <div class="flex items-center space-x-3 bg-gray-800 border border-gray-700 rounded-md pl-3 overflow-hidden">
        <div class="text-sm">
          <%= t(".impersonating", email: Current.impersonated_user.email) %>
        </div>
        <%= render DS::Button.new(
              text: t("impersonation_sessions.leave.button"),
              href: leave_impersonation_sessions_path,
              method: :delete,
              variant: :destructive,
              size: :sm,
              extra_classes: "rounded-none"
            ) %>
        <%= render DS::Button.new(
              text: t(".terminate"),
              href: complete_impersonation_session_path(Current.session.active_impersonator_session),
              method: :put,
              variant: :destructive,
              size: :sm,
              extra_classes: "rounded-none"
            ) %>
      </div>
    <% else %>
      <% if Current.true_user.impersonator_support_sessions.in_progress.any? %>
        <%= form_with url: join_impersonation_sessions_path, class: "flex items-center space-x-2 mr-4" do |f| %>
          <%= f.select :impersonation_session_id,
            Current.true_user.impersonator_support_sessions.in_progress.map { |session|
              ["#{session.impersonated.email} (#{session.status})", session.id]
            },
            { prompt: t("impersonation_sessions.join.prompt") },
            { class: "rounded-md text-sm border-0 focus:ring-0 ring-0 text-black font-mono py-1.5" } %>
          <%= render DS::Button.new(
                text: t("impersonation_sessions.join.button"),
                type: :submit,
                variant: :destructive,
                size: :sm
              ) %>
        <% end %>
      <% end %>

      <%= form_with model: ImpersonationSession.new, class: "flex items-center space-x-2" do |f| %>
        <%= f.text_field :impersonated_id, class: "rounded-md text-sm border-0 focus:ring-0 ring-0 text-black font-mono w-96 py-1.5", placeholder: t(".uuid_placeholder"), autocomplete: "off" %>
        <%= render DS::Button.new(
              text: t("impersonation_sessions.create.button"),
              type: :submit,
              variant: :destructive,
              size: :sm
            ) %>
      <% end %>
    <% end %>
  </div>
</div>