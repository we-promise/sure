<%# locals: (import:) %>

<div class="flex items-center justify-between border border-success rounded-lg bg-success/5 p-5 gap-4 mb-4">
  <span class="text-success">
    <%= icon("check-circle", color: "current") %>
  </span>
  <p class="text-sm text-primary italic"><%= t(".preconfigured_notice") %></p>
</div>

<%= styled_form_with model: @import, url: import_configuration_path(@import), scope: :import, method: :patch, class: "space-y-4" do |form| %>
  <div class="flex items-center gap-4">
    <%= form.select :date_col_label, import.csv_headers, { include_blank: t("import.configurations.common.leave_empty"), label: t("import.configurations.common.date") }, required: true, disabled: import.complete? %>
    <%= form.select :date_format, Family::DATE_FORMATS, { label: t(".date_format_label")}, label: true, required: true, disabled: import.complete? %>
  </div>

  <div class="flex items-center gap-4">
    <%= form.select :amount_col_label, import.csv_headers, { include_blank: t("import.configurations.common.leave_empty"), label: t("import.configurations.common.amount") }, required: true, disabled: import.complete? %>
    <%= form.select :signage_convention, [[t("import.configurations.transaction_import.inflows_negative"), "inflows_negative"], [t("import.configurations.transaction_import.inflows_positive"), "inflows_positive"]], { label: t("import.configurations.transaction_import.signage_label") }, disabled: import.complete? %>
  </div>

  <div class="flex items-center gap-4">
    <%= form.select :currency_col_label, import.csv_headers, { include_blank: t("import.configurations.common.leave_empty"), label: t("import.configurations.common.currency") }, disabled: import.complete? %>
    <%= form.select :number_format, Import::NUMBER_FORMATS.keys, { label: t("import.configurations.common.format"), prompt: t("import.configurations.common.select_column") }, required: true %>
  </div>

  <% unless import.account.present? %>
    <%= form.select :account_col_label, import.csv_headers, { include_blank: t("import.configurations.common.leave_empty"), label: t("import.configurations.common.account") }, disabled: import.complete? %>
  <% end %>

  <%= form.select :name_col_label, import.csv_headers, { include_blank: t("import.configurations.common.leave_empty"), label: t("import.configurations.common.name") }, disabled: import.complete? %>
  <%= form.select :category_col_label, import.csv_headers, { include_blank: t("import.configurations.common.leave_empty"), label: t("import.configurations.common.category") }, disabled: import.complete? %>
  <%= form.select :tags_col_label, import.csv_headers, { include_blank: t("import.configurations.common.leave_empty"), label: t("import.configurations.common.tags") }, disabled: import.complete? %>

  <%= form.submit t("import.configurations.common.apply"), disabled: import.complete? %>
<% end %>