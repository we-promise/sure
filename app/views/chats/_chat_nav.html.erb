<%# locals: (chat:) %>

<nav class="flex items-center justify-between">
  <% path = chat.new_record? ? chats_path : chats_path(previous_chat_id: chat.id) %>

  <div class="flex items-center gap-2 grow">
    <%= render DS::Link.new(
      id: "chat-nav-back",
      variant: "icon",
      icon: "menu",
      href: path,
      frame: chat_frame,
      text: t("chats.chat_nav.all_chats")
    ) %>

    <div class="grow">
      <%= render "chats/chat_title", chat: chat, ctx: "chat" %>
    </div>
  </div>

  <%= render DS::Menu.new(icon_vertical: true) do |menu| %>
    <% menu.with_item(variant: "link", text: t("chats.chat_nav.start_new"), href: new_chat_path, icon: "plus") %>

    <% unless chat.new_record? %>
      <% menu.with_item(
        variant: "link",
        text: t("chats.chat.edit_title"),
        href: edit_chat_path(chat, ctx: "chat"),
        icon: "pencil",
        frame: dom_id(chat, "title")) %>

      <% menu.with_item(
        variant: "button",
        text: t("chats.chat.delete_chat"),
        href: chat_path(chat),
        icon: "trash-2",
        method: :delete,
        confirm: CustomConfirm.for_resource_deletion(t("chats.chat.delete_resource"))) %>
    <% end %>
  <% end %>
</nav>
